/*! (c) Andrea Giammarchi - ISC */
const t=(()=>{const t="DOMContentLoaded",e=new WeakMap,n=[],s=t=>{do{if(t.nextSibling)return!0}while(t=t.parentNode);return!1},i=()=>{n.splice(0).forEach((t=>{!0!==e.get(t[0])&&(e.set(t[0],!0),t[0][t[1]]())}))};document.addEventListener(t,i);class r extends HTMLElement{static withParsedCallback(r,o="parsed"){const{prototype:c}=r,{connectedCallback:a}=c,l=o+"Callback",u=(e,n,s,i)=>{n.disconnect(),s.removeEventListener(t,i),h(e)},h=t=>{n.length||requestAnimationFrame(i),n.push([t,l])};return Object.defineProperties(c,{connectedCallback:{configurable:!0,writable:!0,value(){if(a&&a.apply(this,arguments),l in this&&!e.has(this)){const n=this,{ownerDocument:i}=n;if(e.set(n,!1),"complete"===i.readyState||s(n))h(n);else{const e=()=>u(n,r,i,e);i.addEventListener(t,e);const r=new MutationObserver((()=>{s(n)&&u(n,r,i,e)}));r.observe(n.parentNode,{childList:!0,subtree:!0})}}}},[o]:{configurable:!0,get(){return!0===e.get(this)}}}),r}}return r.withParsedCallback(r)})(),e=t=>{t.hasAttribute("level-up")&&t.replaceWith(...t.children)};let n=class extends t{#t;constructor(t={}){super(),this.#t=t}connectedCallback(){this.parsed&&this.#t.oneConnect||super.connectedCallback()}parsedCallback(){this.init&&("AsyncFunction"===this.init.constructor.name?this.init().then((()=>e(this))):(this.init(),e(this)))}};const s=("dry-"+Math.random()).replace(".","");let i=1;const r=()=>s+i++,o="#inner#",c=/\{(?<content>t-\w[\-\w]+)\}/;function a(t){const e=document.getElementById(t),n=e.getAttribute("class"),s=e.content.cloneNode(!0),i=function(t){const e=t.querySelectorAll("*"),n=new Map;for(const t of e){const e=t.attributes;for(let s=0,i=e.length;s<i;s++){const{nodeName:i,nodeValue:r}=e.item(s),o=r.match(c);if(o){const e=h(t);n.get(e)||n.set(e,[]);const s="on"===i.substring(0,2)?{type:i.substring(2)}:null;n.get(e).push([i,o.groups.content,s])}}}return n}(s);var r;r=i,f(s,(function(t){if(0===t.childElementCount){const e=t.textContent.match(c);if(e){const n=h(t);r.get(n)||r.set(n,[]),r.get(n).push([o,e.groups.content])}}}));const a=new Set;for(const[,t]of i)for(const[e,n,s]of t)a.add(n);return{refClone:s,refData:i,attributes:[...a],tClass:n}}function l(t){if(!function(t){if(!t)return!1;const e=t.indexOf("-");return 0!==e&-1!==e}(t))return;const{refClone:e,refData:s,tClass:i}=a(t);customElements.define(t,class extends n{constructor(){super()}init(){this.style.display="block",this.hasAttribute("class")||this.setAttribute("class",i),this.tRefs=structuredClone(s),this.append(e.cloneNode(!0)),function(t){const e=[];for(const n of t.tRefs){const[s,i]=n,r=t.querySelector("#"+s);for(const[e,n,s]of i){u(r,e,t.getAttribute(n))}e.push([r,i,s])}for(const[n,s,i]of e){const e=r();n.setAttribute("id",e),t.tRefs.set(e,s),t.tRefs.delete(i)}}(this)}})}function u(t,e,n){e===o?t.innerText=n:"class"===e?(t.classList.remove(...t.classList),t.classList.add(n)):t.setAttribute(e,n)}function h(t){let e=t.getAttribute("id");return e||(e=r(),t.setAttribute("id",e)),e}function f(t,e){e(t),t.firstElementChild&&f(t.firstElementChild,e),t.nextElementSibling&&f(t.nextElementSibling,e)}const d=Object.getOwnPropertyDescriptors(Response.prototype),p=t=>"function"==typeof t,g={get:(t,e)=>d.hasOwnProperty(e)?((t,e,{get:n,value:s})=>n||!p(s)?t.then((t=>t[e])):(...n)=>t.then((t=>t[e](...n))))(t,e,d[e]):((t,e)=>p(e)?e.bind(t):e)(t,t[e])};const m="loaded",b="onError";class y extends t{#t;#e;#n;constructor(t){super(),this.#t=t||{},this[b]=!1,this[m]=!1}#s(t,e){const n=this.#e;if(n)return t&&(this.#e=null),e?n.textContent:n}#i(t){this[m]=!0,this[b]=!!t,this[b]&&(this.innerHTML=this.#t.onErrorHtml||""),this.hasAttribute("level-up")&&this.replaceWith(...this.children),this.dispatchEvent(new Event("load"))}originalFragment(t=!0){return this.#s(t,!1)}originalText(t=!0){return this.#s(t,!0)}parsedCallback(){const t=this,e=e=>t.#i(e);this.#n=this.querySelectorAll("slot"),this.#n.forEach((t=>t.remove())),this.#e=document.createDocumentFragment(),this.#e.append(...this.childNodes),this.innerHTML=this.#t.onLoadHtml||"",this.init?"AsyncFunction"===this.init.constructor.name?this.init().then((()=>e())).catch((t=>{e(new Error("m-element error",{cause:t}))})):(this.init(),e()):e()}getSlotByName(t){return[...this.#n].filter((e=>t&&e.name===t))[0]}}customElements.define("layout-m",class extends y{#r;constructor(){super()}async init(){this.#r=function(t){const e={},n=t.attributes;for(let t=0,s=n.length;t<s;t++){const{nodeName:s,nodeValue:i}=n.item(t),r=s.match(w);r&&(e[r.groups.content.substring(2)]=i)}return e}(this),await async function(t){const e=t.getAttribute("source");if(!e)return;const n=await async function(t){if("#"===t.substring(0,1)){const e=document.getElementById(t.substring(1));if(e)try{return JSON.parse(e.textContent)}catch(t){return!1}}else try{return await((t,...e)=>new Proxy(fetch(t,...e),g))(t).json()}catch(t){return!1}}(e);if(!n)return;t.data=n}(this)}set data(t){const e=this.getAttribute("template");if(e){const s=(n=e,a(n).attributes).map((t=>t.substring(2)));try{l(e)}catch(t){}const i=function(t,e,n,s){const i=e?t[e]:t,r=Object.keys(s),o=i.map((t=>function(t,e,n,s){return e.reduce(((e,i)=>(n.includes(i)?e[i]=C(t,s[i])||"":e[i]=t[i]||"",e)),{})}(t,n,r,s)));return o}(t,this.getAttribute("root"),s,this.#r);this.innerHTML=this.createList(e,i)}var n}createList(t,e){return e.map((e=>`\n                        <${t}\n                            ${function(t){return Object.entries(t).map((([t,e])=>`t-${t}="${e}"`))}(e).join("\n")}\n                        ></${t}>\n                    `)).join("\n")}});const C=(t,e)=>{const n=e.split(".");let s=t;for(;n.length&&s;)s=s[n.shift()];return s};const w=/(?<content>t-\w[\-\w]+)/;
